<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>imu_object • imuf</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="imu_object">
<meta name="description" content="Learn how to use `imu_object()` to animate on shiny an inertial measurement unit (IMU) connected to a serial port in real time">
<meta property="og:description" content="Learn how to use `imu_object()` to animate on shiny an inertial measurement unit (IMU) connected to a serial port in real time">
<meta property="og:image" content="https://gitboosting.github.io/imuf/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">imuf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/imuf.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/animate_imu.html">animate_imu</a></li>
    <li><a class="dropdown-item" href="../articles/imu_object.html">imu_object</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gitboosting/imuf/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>imu_object</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gitboosting/imuf/blob/main/vignettes/imu_object.Rmd" class="external-link"><code>vignettes/imu_object.Rmd</code></a></small>
      <div class="d-none name"><code>imu_object.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="section-introduction">Introduction<a class="anchor" aria-label="anchor" href="#section-introduction"></a>
</h2>
<p>This vignette describes a way to visualize on shiny a 3D animation of
an inertial measurement unit (IMU) in real time. The setup requires:</p>
<ul>
<li>An IMU that is connected to the shiny server via a serial port
(e.g. “COM3”)</li>
<li>Firmware that has been installed to write IMU measurements to a
serial port. Each measurement is formatted as six comma-separated
floats: acc_x, acc_y, acc_z, gyr_x, gyr_y, gyr_z. The required firmware
is, of course, hardware dependent.</li>
</ul>
<p>We assume both of these have been established.</p>
<p>The core of the shiny logic consists of three parts:</p>
<ul>
<li>Read IMU data from a serial port and package it as inputs for
<code><a href="../reference/compUpdate.html">compUpdate()</a></code>
</li>
<li>Call <code><a href="../reference/compUpdate.html">compUpdate()</a></code> to output a quaternion that
represents the new orientation</li>
<li>Call <code><a href="../reference/imu_object-update.html">imu_proxy()</a></code> and <code><a href="../reference/imu_object-update.html">imu_send_data()</a></code> to
update the <code><a href="../reference/imu_object.html">imu_object()</a></code> widget with the quaternion</li>
</ul>
<p>The code of a possible implementation is shown in the next section We
will explain this implementation in the sections following that.</p>
</div>
<div class="section level2">
<h2 id="section-sample-implementation">Sample implementation<a class="anchor" aria-label="anchor" href="#section-sample-implementation"></a>
</h2>
<div class="sourceCode" id="section-cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">serial</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gitboosting/imuf" class="external-link">imuf</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">getCon</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">port</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="co"># set up connection for serial port</span></span>
<span>    <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">serial</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/serial/man/serialConnection.html" class="external-link">serialConnection</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"testcon"</span>, port <span class="op">=</span> <span class="va">port</span>,</span>
<span>                                    mode <span class="op">=</span> <span class="st">"115200,n,8,1"</span>, newline <span class="op">=</span> <span class="fl">1</span>, translation <span class="op">=</span> <span class="st">"crlf"</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">serial</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/serial/man/isOpen.html" class="external-link">isOpen</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span>    <span class="va">con</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">readFromSerial</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="co"># helper - function to convert sensor coord to NED</span></span>
<span>    <span class="va">bmi2ned</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">bmi</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co"># convert bmi coord to ned coord</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bmi</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="op">-</span><span class="va">bmi</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="op">-</span><span class="va">bmi</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="co"># helper - function to convert deg to radian</span></span>
<span>    <span class="va">toRad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">deg</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">deg</span> <span class="op">*</span> <span class="va">pi</span><span class="op">/</span><span class="fl">180</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="co"># functions to process and validate data read from serial port</span></span>
<span>    <span class="va">isValidLength</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">minLength</span> <span class="op">&lt;-</span> <span class="fl">32</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;=</span> <span class="va">minLength</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">str2Vec</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co">#</span></span>
<span>      <span class="co"># data from the IMU is a row of 6 comma-separated floats:</span></span>
<span>      <span class="co"># accx, accy, accz, gyrx, gyry, gyrz</span></span>
<span>      <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_split.html" class="external-link">str_split_1</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">","</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="va">y</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">isValidNumElements</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">6</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>      <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  </span>
<span>    <span class="kw">while</span> <span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">nInQ</span> <span class="op">&lt;-</span> <span class="fu">serial</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/serial/man/nBytesInQueue.html" class="external-link">nBytesInQueue</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span><span class="op">[</span><span class="st">"n_in"</span><span class="op">]</span></span>
<span>      <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">isValidLength</span><span class="op">(</span><span class="va">nInQ</span><span class="op">)</span><span class="op">)</span> <span class="kw">next</span></span>
<span>      <span class="co">#</span></span>
<span>      <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">serial</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/serial/man/read.serialConnection.html" class="external-link">read.serialConnection</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">str2Vec</span><span class="op">(</span><span class="op">)</span></span>
<span>      <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">isValidNumElements</span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span> <span class="kw">next</span></span>
<span>      <span class="co">#</span></span>
<span>      <span class="co"># a is the IMU output we want, exit infinite loop</span></span>
<span>      <span class="kw">break</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="co"># gyr from bmi270 IMU is in deg/sec, need to convert to rad/sec</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>acc <span class="op">=</span> <span class="fu">bmi2ned</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,</span>
<span>         gyr <span class="op">=</span> <span class="fu">bmi2ned</span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">toRad</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">runshiny</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">port</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="va">ui</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"do"</span>, <span class="st">"Start animation"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/imu_object-shiny.html">imu_objectOutput</a></span><span class="op">(</span><span class="st">"imu1"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  </span>
<span>    <span class="va">server</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>      <span class="co"># initial orientation</span></span>
<span>      <span class="va">quat0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">pi</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">pi</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  </span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">do</span>, <span class="op">{</span></span>
<span>        <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">getCon</span><span class="op">(</span><span class="va">port</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">open</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span>        <span class="va">quat</span> <span class="op">&lt;-</span> <span class="va">quat0</span></span>
<span>        <span class="kw">while</span> <span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">accgyr</span> <span class="op">&lt;-</span> <span class="fu">readFromSerial</span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span>          <span class="va">quat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compUpdate.html">compUpdate</a></span><span class="op">(</span><span class="va">accgyr</span><span class="op">$</span><span class="va">acc</span>, <span class="va">accgyr</span><span class="op">$</span><span class="va">gyr</span>, dt <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">50</span>, initQ <span class="op">=</span> <span class="va">quat</span>, gain <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span>          <span class="fu"><a href="../reference/imu_object-update.html">imu_proxy</a></span><span class="op">(</span><span class="st">"imu1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="../reference/imu_object-update.html">imu_send_data</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">quat</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span>      <span class="va">output</span><span class="op">$</span><span class="va">imu1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/imu_object-shiny.html">renderImu_object</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="../reference/imu_object.html">imu_object</a></span><span class="op">(</span><span class="va">quat0</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="section-imu-data">IMU Data<a class="anchor" aria-label="anchor" href="#section-imu-data"></a>
</h2>
<p>The goal of this step is to read the IMU data from a serial port,
validate it, and package it so it can be used as input to
<code><a href="../reference/compUpdate.html">compUpdate()</a></code>.</p>
<p>We first use the serial package to set up a serial port connection.
We then enter into a loop to check if there is data and if so, whether
it meets certain requirements.</p>
<p>Once we confirm the data is legit, we exit the loop and proceed to
package the IMU measurements into a list of two vectors: a numeric
vector for the 3 accelerometer readings and another numeric vector for
the 3 gyroscope readings. We take care to transform the data so it
conforms to what <code><a href="../reference/compUpdate.html">compUpdate()</a></code> expects. First, we transform
the data from IMU’s coordinate system to the north-east-down (NED)
convention <code><a href="../reference/compUpdate.html">compUpdate()</a></code> expects. Second, we convert the
gyroscope readings from deg/sec to rad/sec again expected by
<code><a href="../reference/compUpdate.html">compUpdate()</a></code>. Whether these transformations are necessary
depends on the IMU hardware and firmware you use.</p>
</div>
<div class="section level2">
<h2 id="section-orientation-update">Orientation update<a class="anchor" aria-label="anchor" href="#section-orientation-update"></a>
</h2>
<p>With the IMU readings appropriately packaged, we call
<code><a href="../reference/compUpdate.html">compUpdate()</a></code> to calculate a new rotation quaternion that
represents the latest orientation of the IMU. Besides the accelerometer
and gyroscope readings, there are two other inputs worth mentioning. The
first is the time duration (in seconds). This should be the inverse of
the sampling frequency (in Hz) of the IMU. The second is the initial
orientation. This should be the quaternion output of the previous
iteration. In other words, the quaternion of the last iteration becomes
the initial orientation of the current iteration.</p>
</div>
<div class="section level2">
<h2 id="section-animation-update">Animation update<a class="anchor" aria-label="anchor" href="#section-animation-update"></a>
</h2>
<p>The last step is to update animation with the newly calculated
rotation quaternion. We accomplish this by calling
<code><a href="../reference/imu_object-update.html">imu_proxy()</a></code> and <code><a href="../reference/imu_object-update.html">imu_send_data()</a></code> in succession.
Note that the input to <code><a href="../reference/imu_object-update.html">imu_proxy()</a></code> is the output id of the
rendered <code><a href="../reference/imu_object.html">imu_object()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="section-visualization">Visualization<a class="anchor" aria-label="anchor" href="#section-visualization"></a>
</h2>
<p>As you move the IMU, the animation shown should reflect the movement
of the IMU. The following is an example of what an animation may look
like:</p>
<iframe auto_size: true src="imu_object_mov.mp4" align="middle" frameborder="0" allowfullscreen>
</iframe>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Felix Chan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
